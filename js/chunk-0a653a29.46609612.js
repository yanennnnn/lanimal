(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a653a29"],{9273:function(t,a,e){"use strict";var c=e("e117"),i=e.n(c);i.a},"99af":function(t,a,e){"use strict";var c=e("23e7"),i=e("d039"),s=e("e8b5"),n=e("861d"),r=e("7b0b"),o=e("50c4"),d=e("8418"),u=e("65f0"),l=e("1dde"),p=e("b622"),f=e("2d00"),g=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",y=f>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),b=l("concat"),m=function(t){if(!n(t))return!1;var a=t[g];return void 0!==a?!!a:s(t)},C=!y||!b;c({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,c,i,s,n=r(this),l=u(n,0),p=0;for(a=-1,c=arguments.length;a<c;a++)if(s=-1===a?n:arguments[a],m(s)){if(i=o(s.length),p+i>h)throw TypeError(v);for(e=0;e<i;e++,p++)e in s&&d(l,p,s[e])}else{if(p>=h)throw TypeError(v);d(l,p++,s)}return l.length=p,l}})},e117:function(t,a,e){},ed84:function(t,a,e){"use strict";e.r(a);var c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"products"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"bg bg-cover"}),e("div",{attrs:{calss:"container-fluid"}},[e("div",{staticClass:"row m-0 px-5 justify-content-center"},[e("div",{staticClass:"col-md-3 col-7 fixed-md-top",staticStyle:{"margin-top":"70px"}},[e("div",{staticClass:"list-group"},[e("a",{staticClass:"list-group-item list-group-item-action",class:{active:""===t.category},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.targetcategory("")}}},[t._v(" 全部 ")]),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:"寵物用品"===t.category},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.targetcategory("寵物用品")}}},[t._v("寵物用品")]),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:"寵物食品"===t.category},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.targetcategory("寵物食品")}}},[t._v("寵物食品")]),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:"寵物玩具"===t.category},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.targetcategory("寵物玩具")}}},[t._v("寵物玩具")])]),e("div",{staticClass:"cart mt-3 border border-secondary border-top-0 "},[e("h3",{staticClass:"h3 bg-dark text-light py-2 text-center"},[t._v("加入購物車")]),t.carts.length?e("div",[t._l(t.carts,(function(a){return e("div",{key:a.id,staticClass:"px-2 d-flex py-2 border-bottom"},[e("a",{staticClass:"text-decoration-none text-danger align-self-center mx-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.delCart(a.product.id)}}},[e("i",{staticClass:"fa fa-trash fa-2x"})]),e("div",{staticClass:"ml-3 m-auto text-center"},[e("span",{staticClass:"h6"},[t._v(t._s(a.product.title))]),e("div",{staticClass:"d-flex mt-3 justify-content-center"},[e("button",{staticClass:"btn btn-outline-secondary rounded-0 btn-sm",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(e){return t.updateQty(a.product.id,a.quantity-1)}}},[t._v("-")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"text-center",staticStyle:{width:"90px"},attrs:{type:"text",disabled:""},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("button",{staticClass:"btn btn-outline-secondary rounded-0 btn-sm",attrs:{type:"button"},on:{click:function(e){return t.updateQty(a.product.id,a.quantity+1)}}},[t._v("+")])])])])})),e("a",{staticClass:"btn btn-secondary m-2 d-block",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.goCart(a)}}},[t._v("前往結帳")])],2):e("div",{staticClass:"my-5 text-center"},[t._v("尚未有商品在購物車")])])]),e("div",{staticClass:"col-md-9 ml-auto mt-5 col-12"},[e("div",{staticClass:"row"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"col-xl-4 p-0 mb-4 col-md-6 col-12 "},[e("div",{staticClass:"card products-list rounded-0 h-auto"},[e("div",{staticClass:"bg-cover card-img",style:{backgroundImage:"url("+a.imageUrl[0]+")"},on:{click:function(e){return t.goCurrentTarget(a.id)}}}),e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-title d-flex"},[e("h3",[t._v(t._s(a.title))]),e("span",{staticClass:"text-muted ml-auto mr-2 align-self-center",staticStyle:{"font-size":"16px"}},[t._v(t._s(a.category))])]),e("p",[t._v(t._s(a.content))]),e("div",{staticClass:"btn-type d-flex mt-2 align-self-end"},[e("span",{staticClass:"price"},[t._v(t._s(a.price))]),e("span",{staticClass:"originPrice text-muted"},[t._v(t._s(a.origin_price))]),e("a",{staticClass:"text-decoration-none ml-auto text-secondary mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addCart(a)}}},[e("i",{staticClass:"fa fa-shopping-cart fa-2x",attrs:{"aria-hidden":"true"}})])])])])])})),0)])])])],1)},i=[],s=(e("99af"),e("4de4"),{name:"Products",data:function(){return{products:[],category:"",carts:[],isLoading:!1}},methods:{getProducts:function(){var t=this;t.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("bc4c7f65-dcb1-4e02-97a6-6740e37fc6f8","/ec/products");t.$http.get(a).then((function(a){if(200===a.status){if(""===t.category){var e=a.data.data.filter((function(t){return"助養動物"!==t.category}));t.products=e}else{var c=a.data.data.filter((function(a){return t.category===a.category}));t.products=c}t.isLoading=!1}}))},getCart:function(){var t=this;t.isLoading=!0,t.$http.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("bc4c7f65-dcb1-4e02-97a6-6740e37fc6f8","/ec/shopping")).then((function(a){t.carts=a.data.data,t.isLoading=!1}))},targetcategory:function(t){switch(t){case"":this.category="";break;case"寵物用品":this.category="寵物用品";break;case"寵物食品":this.category="寵物食品";break;case"寵物玩具":this.category="寵物玩具";break;default:break}this.getProducts()},goCurrentTarget:function(t){this.$router.push({path:"/singlepage/".concat(t)})},addCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,c={product:t.id,quantity:a};e.isLoading=!0,e.$http.post("".concat("https://course-ec-api.hexschool.io","/api/").concat("bc4c7f65-dcb1-4e02-97a6-6740e37fc6f8","/ec/shopping"),c).then((function(){e.getCart(),e.isLoading=!1})).catch((function(t){console.log(t.response.data.errors),e.isLoading=!1}))},delCart:function(t){var a=this;a.isLoading=!0,a.$http.delete("".concat("https://course-ec-api.hexschool.io","/api/").concat("bc4c7f65-dcb1-4e02-97a6-6740e37fc6f8","/ec/shopping/").concat(t)).then((function(){a.getCart(),a.isLoading=!1}))},updateQty:function(t,a){var e=this;e.isLoading=!0;var c={product:t,quantity:a};e.$http.patch("".concat("https://course-ec-api.hexschool.io","/api/").concat("bc4c7f65-dcb1-4e02-97a6-6740e37fc6f8","/ec/shopping"),c).then((function(){e.getCart(),e.isLoading=!1})).catch((function(t){console.log(t.response.data.errors),e.isLoading=!1}))},goCart:function(){this.$router.push({path:"/cart"})}},created:function(){this.getProducts(),this.getCart()}}),n=s,r=(e("9273"),e("2877")),o=Object(r["a"])(n,c,i,!1,null,"4f0c73de",null);a["default"]=o.exports}}]);
//# sourceMappingURL=chunk-0a653a29.46609612.js.map